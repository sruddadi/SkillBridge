{"ast":null,"code":"import _slicedToArray from\"/Users/srikaruddadi/Desktop/WDM/skillbridgereact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import\"../css/signup.css\";import avatar from\"../assets/logo.png\";import{Link}from\"react-router-dom\";import{useLocation}from\"react-router-dom\";import Swal from\"sweetalert2\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function EditProfile(){var _useLocation=useLocation(),search=_useLocation.search;var searchParams=new URLSearchParams(search);var email=searchParams.get(\"email\");var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),firstname=_useState2[0],setFirstname=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),lastname=_useState4[0],setLastname=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),password=_useState6[0],setPassword=_useState6[1];var handleFormSubmit=function handleFormSubmit(e){e.preventDefault();if(!/^[a-zA-Z]{3,10}$/.test(firstname)){Swal.fire(\"Error!\",\"Please enter a valid first name\",\"error\");return;}if(!/^[a-zA-Z]{3,10}$/.test(lastname)){Swal.fire(\"Error!\",\"Please enter a valid last name\",\"error\");return;}if(!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)){Swal.fire(\"Error!\",\"Please enter a valid email\",\"error\");return;}if(!/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=!])(?=.*[^\\s]).{8,}$/.test(password)){Swal.fire(\"Error!\",\"Please enter a valid password format\",\"error\");return;}fetch(\"https://sxt9335.uta.cloud/updateprofile.php\",{method:\"POST\",headers:{\"Content-Type\":\"application/x-www-form-urlencoded\"},body:\"firstname=\".concat(firstname,\"&lastname=\").concat(lastname,\"&email=\").concat(email,\"&password=\").concat(password)}).then(function(response){return response.text();}).then(function(data){if(data.startsWith(\"Login Successful\")){var roleIndex=data.indexOf(\"| Role:\");var userRole=data.substring(roleIndex+8).trim();Swal.fire(\"Success!\",\"Details updated successfully!\",\"success\").then(function(result){if(result.isConfirmed&&userRole===\"Admin\"){window.location.href=\"/admin?email=\".concat(email);}else if(result.isConfirmed&&userRole===\"Student\"){window.location.href=\"/student?email=\".concat(email);}else if(result.isConfirmed&&userRole===\"Instructor\"){window.location.href=\"/instructor?email=\".concat(email);}else if(result.isConfirmed&&userRole===\"Program Coordinator\"){window.location.href=\"/pc?email=\".concat(email);}else{window.location.href=\"/QAOrganizer?email=\".concat(email);}});}else{Swal.fire(\"Oops!\",\"Failed to update user\",\"error\");}}).catch(function(error){console.error(\"Error:\",error);Swal.fire(\"Oops!\",\"An error occurred while registering the user.\",\"error\").then(function(result){if(result.isConfirmed){window.location.href=\"/admin\";}});});};return/*#__PURE__*/_jsxs(\"div\",{className:\"signbody\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsx(Link,{to:\"/home\",\"data-after\":\"About\",children:/*#__PURE__*/_jsx(\"img\",{className:\"signuplogo\",src:avatar,alt:\"skillbridge\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"signlogin-wrapper\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleFormSubmit,method:\"POST\",className:\"signform\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"signinput-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"firstname\"// Set the name attribute to \"firstname\"\n,id:\"loginUser\",onChange:function onChange(e){return setFirstname(e.target.value);}// Extract and set the value\n,required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"loginUser\",children:\"First Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signinput-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"lastname\"// Set the name attribute to \"lastname\"\n,id:\"loginUser\",onChange:function onChange(e){return setLastname(e.target.value);}// Extract and set the value\n,required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"loginUser\",children:\"Last Name\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signinput-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\"// Set the name attribute to \"email\"\n,id:\"loginUser\",value:email,required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"loginUser\",children:\"Email\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"signinput-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\"// Set the name attribute to \"password\"\n,id:\"loginPassword\",onChange:function onChange(e){return setPassword(e.target.value);}// Extract and set the value\n,required:true}),/*#__PURE__*/_jsx(\"label\",{for:\"loginPassword\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Update\",className:\"signsubmit-btn\"}),/*#__PURE__*/_jsx(Link,{to:\"/admin?email=\".concat(email),className:\"signforgot-pw\",children:\"Go Back\"})]})})]});}export default EditProfile;","map":{"version":3,"names":["React","useState","avatar","Link","useLocation","Swal","jsx","_jsx","jsxs","_jsxs","EditProfile","_useLocation","search","searchParams","URLSearchParams","email","get","_useState","_useState2","_slicedToArray","firstname","setFirstname","_useState3","_useState4","lastname","setLastname","_useState5","_useState6","password","setPassword","handleFormSubmit","e","preventDefault","test","fire","fetch","method","headers","body","concat","then","response","text","data","startsWith","roleIndex","indexOf","userRole","substring","trim","result","isConfirmed","window","location","href","catch","error","console","className","children","to","src","alt","onSubmit","type","name","id","onChange","target","value","required","for"],"sources":["/Users/srikaruddadi/Desktop/WDM/skillbridgereact/src/Components/EditProfile.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport \"../css/signup.css\";\nimport avatar from \"../assets/logo.png\";\nimport { Link } from \"react-router-dom\";\nimport { useLocation } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\nfunction EditProfile() {\n  const { search } = useLocation();\n  const searchParams = new URLSearchParams(search);\n  const email = searchParams.get(\"email\");\n  const [firstname, setFirstname] = useState(\"\");\n  const [lastname, setLastname] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const handleFormSubmit = (e) => {\n    e.preventDefault();\n    if (!/^[a-zA-Z]{3,10}$/.test(firstname)) {\n      Swal.fire(\"Error!\", \"Please enter a valid first name\", \"error\");\n      return;\n    }\n    if (!/^[a-zA-Z]{3,10}$/.test(lastname)) {\n      Swal.fire(\"Error!\", \"Please enter a valid last name\", \"error\");\n      return;\n    }\n    if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(email)) {\n      Swal.fire(\"Error!\", \"Please enter a valid email\", \"error\");\n      return;\n    }\n    if (\n      !/^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[@#$%^&+=!])(?=.*[^\\s]).{8,}$/.test(\n        password\n      )\n    ) {\n      Swal.fire(\"Error!\", \"Please enter a valid password format\", \"error\");\n      return;\n    }\n    fetch(\"https://sxt9335.uta.cloud/updateprofile.php\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      body: `firstname=${firstname}&lastname=${lastname}&email=${email}&password=${password}`,\n    })\n      .then((response) => response.text())\n      .then((data) => {\n        if (data.startsWith(\"Login Successful\")) {\n          const roleIndex = data.indexOf(\"| Role:\");\n          const userRole = data.substring(roleIndex + 8).trim();\n          Swal.fire(\n            \"Success!\",\n            \"Details updated successfully!\",\n            \"success\"\n          ).then((result) => {\n            if (result.isConfirmed && userRole === \"Admin\") {\n              window.location.href = `/admin?email=${email}`;\n            } else if (result.isConfirmed && userRole === \"Student\") {\n              window.location.href = `/student?email=${email}`;\n            } else if (result.isConfirmed && userRole === \"Instructor\") {\n              window.location.href = `/instructor?email=${email}`;\n            } else if (\n              result.isConfirmed &&\n              userRole === \"Program Coordinator\"\n            ) {\n              window.location.href = `/pc?email=${email}`;\n            } else {\n              window.location.href = `/QAOrganizer?email=${email}`;\n            }\n          });\n        } else {\n          Swal.fire(\"Oops!\", \"Failed to update user\", \"error\");\n        }\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n        Swal.fire(\n          \"Oops!\",\n          \"An error occurred while registering the user.\",\n          \"error\"\n        ).then((result) => {\n          if (result.isConfirmed) {\n            window.location.href = \"/admin\";\n          }\n        });\n      });\n  };\n  return (\n    <div className=\"signbody\">\n      <header>\n        <Link to=\"/home\" data-after=\"About\">\n          <img className=\"signuplogo\" src={avatar} alt=\"skillbridge\" />\n        </Link>\n      </header>\n      <div className=\"signlogin-wrapper\">\n        <form onSubmit={handleFormSubmit} method=\"POST\" className=\"signform\">\n          <h3>Update Profile</h3>\n          <div className=\"signinput-group\">\n            <input\n              type=\"text\"\n              name=\"firstname\" // Set the name attribute to \"firstname\"\n              id=\"loginUser\"\n              onChange={(e) => setFirstname(e.target.value)} // Extract and set the value\n              required\n            />\n            <label for=\"loginUser\">First Name</label>\n          </div>\n          <div className=\"signinput-group\">\n            <input\n              type=\"text\"\n              name=\"lastname\" // Set the name attribute to \"lastname\"\n              id=\"loginUser\"\n              onChange={(e) => setLastname(e.target.value)} // Extract and set the value\n              required\n            />\n            <label for=\"loginUser\">Last Name</label>\n          </div>\n          <div className=\"signinput-group\">\n            <input\n              type=\"text\"\n              name=\"email\" // Set the name attribute to \"email\"\n              id=\"loginUser\"\n              value={email}\n              required\n            />\n            <label for=\"loginUser\">Email</label>\n          </div>\n          <div className=\"signinput-group\">\n            <input\n              type=\"password\"\n              name=\"password\" // Set the name attribute to \"password\"\n              id=\"loginPassword\"\n              onChange={(e) => setPassword(e.target.value)} // Extract and set the value\n              required\n            />\n            <label for=\"loginPassword\">Password</label>\n          </div>\n\n          <input type=\"submit\" value=\"Update\" className=\"signsubmit-btn\" />\n          <Link to={`/admin?email=${email}`} className=\"signforgot-pw\">\n            Go Back\n          </Link>\n        </form>\n      </div>\n    </div>\n  );\n}\n\nexport default EditProfile;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}