{"ast":null,"code":"import _regeneratorRuntime from\"/Users/srikaruddadi/Desktop/WDM/skillbridgereact/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/srikaruddadi/Desktop/WDM/skillbridgereact/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/srikaruddadi/Desktop/WDM/skillbridgereact/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/srikaruddadi/Desktop/WDM/skillbridgereact/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import ScrollToBottom from\"react-scroll-to-bottom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Chat(_ref){var socket=_ref.socket,username=_ref.username,room=_ref.room;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),currentMessage=_useState2[0],setCurrentMessage=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),messageList=_useState4[0],setMessageList=_useState4[1];var sendMessage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var messageData;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(currentMessage!==\"\")){_context.next=6;break;}messageData={room:room,author:username,message:currentMessage,time:new Date(Date.now()).getHours()+\":\"+new Date(Date.now()).getMinutes()};_context.next=4;return socket.emit(\"send_message\",messageData);case 4:setMessageList(function(list){return[].concat(_toConsumableArray(list),[messageData]);});setCurrentMessage(\"\");case 6:case\"end\":return _context.stop();}},_callee);}));return function sendMessage(){return _ref2.apply(this,arguments);};}();useEffect(function(){var handleReceivedMessage=function handleReceivedMessage(data){setMessageList(function(list){return[].concat(_toConsumableArray(list),[data]);});console.log(data);};socket.on(\"recieve_message\",handleReceivedMessage);return function(){// Clean up the event listener when the component unmounts\nsocket.off(\"recieve_message\",handleReceivedMessage);};},[socket]);return/*#__PURE__*/_jsxs(\"div\",{className:\"chat-window\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"chat-header\",children:/*#__PURE__*/_jsx(\"p\",{children:\"Live Chat\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"chat-body\",children:/*#__PURE__*/_jsx(ScrollToBottom,{className:\"message-container\",children:messageList.map(function(messageContent){return/*#__PURE__*/_jsx(\"div\",{className:\"message\",id:username===messageContent.author?\"you\":\"other\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"message-content\",children:/*#__PURE__*/_jsx(\"p\",{children:messageContent.message})}),/*#__PURE__*/_jsxs(\"div\",{className:\"message-meta\",children:[/*#__PURE__*/_jsx(\"p\",{id:\"time\",children:messageContent.time}),/*#__PURE__*/_jsx(\"p\",{id:\"author\",children:messageContent.author})]})]})});})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"chat-footer\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:currentMessage,placeholder:\"Type a message....\",onChange:function onChange(e){setCurrentMessage(e.target.value);},onKeyPress:function onKeyPress(e){e.key===\"Enter\"&&sendMessage();}}),/*#__PURE__*/_jsx(\"button\",{onClick:sendMessage,children:\"\\u25BA\"})]})]});}export default Chat;","map":{"version":3,"names":["React","useEffect","useState","ScrollToBottom","jsx","_jsx","jsxs","_jsxs","Chat","_ref","socket","username","room","_useState","_useState2","_slicedToArray","currentMessage","setCurrentMessage","_useState3","_useState4","messageList","setMessageList","sendMessage","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","messageData","wrap","_callee$","_context","prev","next","author","message","time","Date","now","getHours","getMinutes","emit","list","concat","_toConsumableArray","stop","apply","arguments","handleReceivedMessage","data","console","log","on","off","className","children","map","messageContent","id","type","value","placeholder","onChange","e","target","onKeyPress","key","onClick"],"sources":["/Users/srikaruddadi/Desktop/WDM/skillbridgereact/src/Components/Chat.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport ScrollToBottom from \"react-scroll-to-bottom\";\n\nfunction Chat({ socket, username, room }) {\n  const [currentMessage, setCurrentMessage] = useState(\"\");\n  const [messageList, setMessageList] = useState([]);\n\n  const sendMessage = async () => {\n    if (currentMessage !== \"\") {\n      const messageData = {\n        room: room,\n        author: username,\n        message: currentMessage,\n        time:\n          new Date(Date.now()).getHours() +\n          \":\" +\n          new Date(Date.now()).getMinutes(),\n      };\n\n      await socket.emit(\"send_message\", messageData);\n      setMessageList((list) => [...list, messageData]);\n      setCurrentMessage(\"\");\n    }\n  };\n\n  useEffect(() => {\n    const handleReceivedMessage = (data) => {\n      setMessageList((list) => [...list, data]);\n      console.log(data);\n    };\n\n    socket.on(\"recieve_message\", handleReceivedMessage);\n\n    return () => {\n      // Clean up the event listener when the component unmounts\n      socket.off(\"recieve_message\", handleReceivedMessage);\n    };\n  }, [socket]);\n\n  return (\n    <div className=\"chat-window\">\n      <div className=\"chat-header\">\n        <p>Live Chat</p>\n      </div>\n      <div className=\"chat-body\">\n        <ScrollToBottom className=\"message-container\">\n          {messageList.map((messageContent) => {\n            return (\n              <div\n                className=\"message\"\n                id={username === messageContent.author ? \"you\" : \"other\"}\n              >\n                <div>\n                  <div className=\"message-content\">\n                    <p>{messageContent.message}</p>\n                  </div>\n                  <div className=\"message-meta\">\n                    <p id=\"time\">{messageContent.time}</p>\n                    <p id=\"author\">{messageContent.author}</p>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </ScrollToBottom>\n      </div>\n      <div className=\"chat-footer\">\n        <input\n          type=\"text\"\n          value={currentMessage}\n          placeholder=\"Type a message....\"\n          onChange={(e) => {\n            setCurrentMessage(e.target.value);\n          }}\n          onKeyPress={(e) => {\n            e.key === \"Enter\" && sendMessage();\n          }}\n        />\n        <button onClick={sendMessage}>&#9658;</button>\n      </div>\n    </div>\n  );\n}\n\nexport default Chat;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}